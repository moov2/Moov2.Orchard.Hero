/*
** NOTE: This file is generated by Gulp and should not be edited directly!
** Any changes made directly to this file will be overwritten next time its asset group is processed by Gulp.
*/

(function () {
    var CONTENT_TYPE_IMAGE = 'Image';

    var $openMediaBtn = $('.js-open-media-library'),
        $input = $('#Hero_Text');

    var addListeners = function () {
        $openMediaBtn.on('click', openMediaPicker);
    };

    /**
     * Opens media picker, content editor can select a media from library, which
     * is then used to generate HTML.
     */
    var openMediaPicker = function () {
        var adminIndex = location.href.toLowerCase().indexOf('/admin/'),
            cachedScrollPosition = 0;

        if (adminIndex === -1) {
            return false;
        }

        $.colorbox({
            href: location.href.substr(0, adminIndex) + '/Admin/Orchard.MediaLibrary?dialog=true',
            iframe: true,
            reposition: true,
            width: '90%',
            height: '90%',
            onLoad: function () {
                cachedScrollPosition = $('body').scrollTop();
                // hide the scrollbars from the main window
                $('html, body').css('overflow', 'hidden');
            },
            onClosed: function () {
                $('html, body').css('overflow', '');
                $('body').scrollTop(cachedScrollPosition);

                setHtml($.colorbox.selectedData);
            }
        });

        return false;
    };

    /**
     * Returns HTML for a single image.
     */
    var renderSingleImage = function (image) {
        return '<section class="hero">\n\t<picture>\n\t\t<img src="' + image.resource + '" class="display--block" alt="' + image.alternateText + '" />\n\t</picture>\n</section>';
    };

    /**
     * Uses selected media to set HTML.
     */
    var setHtml = function (media) {
        if (!media || media.length === 0) {
            return;
        }

        var html = '';

        if (media.length === 1 && media[0].contentType === CONTENT_TYPE_IMAGE) {
            html = renderSingleImage(media[0]);
        }

        $input.val(html);
        $input[0].dispatchEvent(new Event('change'));

    };

    addListeners();
})();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm9yY2hhcmQuaGVyby5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQUFMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoib3JjaGFyZC5oZXJvLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBDT05URU5UX1RZUEVfSU1BR0UgPSAnSW1hZ2UnO1xyXG5cclxuICAgIHZhciAkb3Blbk1lZGlhQnRuID0gJCgnLmpzLW9wZW4tbWVkaWEtbGlicmFyeScpLFxyXG4gICAgICAgICRpbnB1dCA9ICQoJyNIZXJvX1RleHQnKTtcclxuXHJcbiAgICB2YXIgYWRkTGlzdGVuZXJzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICRvcGVuTWVkaWFCdG4ub24oJ2NsaWNrJywgb3Blbk1lZGlhUGlja2VyKTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBPcGVucyBtZWRpYSBwaWNrZXIsIGNvbnRlbnQgZWRpdG9yIGNhbiBzZWxlY3QgYSBtZWRpYSBmcm9tIGxpYnJhcnksIHdoaWNoXHJcbiAgICAgKiBpcyB0aGVuIHVzZWQgdG8gZ2VuZXJhdGUgSFRNTC5cclxuICAgICAqL1xyXG4gICAgdmFyIG9wZW5NZWRpYVBpY2tlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgYWRtaW5JbmRleCA9IGxvY2F0aW9uLmhyZWYudG9Mb3dlckNhc2UoKS5pbmRleE9mKCcvYWRtaW4vJyksXHJcbiAgICAgICAgICAgIGNhY2hlZFNjcm9sbFBvc2l0aW9uID0gMDtcclxuXHJcbiAgICAgICAgaWYgKGFkbWluSW5kZXggPT09IC0xKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICQuY29sb3Jib3goe1xyXG4gICAgICAgICAgICBocmVmOiBsb2NhdGlvbi5ocmVmLnN1YnN0cigwLCBhZG1pbkluZGV4KSArICcvQWRtaW4vT3JjaGFyZC5NZWRpYUxpYnJhcnk/ZGlhbG9nPXRydWUnLFxyXG4gICAgICAgICAgICBpZnJhbWU6IHRydWUsXHJcbiAgICAgICAgICAgIHJlcG9zaXRpb246IHRydWUsXHJcbiAgICAgICAgICAgIHdpZHRoOiAnOTAlJyxcclxuICAgICAgICAgICAgaGVpZ2h0OiAnOTAlJyxcclxuICAgICAgICAgICAgb25Mb2FkOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBjYWNoZWRTY3JvbGxQb3NpdGlvbiA9ICQoJ2JvZHknKS5zY3JvbGxUb3AoKTtcclxuICAgICAgICAgICAgICAgIC8vIGhpZGUgdGhlIHNjcm9sbGJhcnMgZnJvbSB0aGUgbWFpbiB3aW5kb3dcclxuICAgICAgICAgICAgICAgICQoJ2h0bWwsIGJvZHknKS5jc3MoJ292ZXJmbG93JywgJ2hpZGRlbicpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBvbkNsb3NlZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgJCgnaHRtbCwgYm9keScpLmNzcygnb3ZlcmZsb3cnLCAnJyk7XHJcbiAgICAgICAgICAgICAgICAkKCdib2R5Jykuc2Nyb2xsVG9wKGNhY2hlZFNjcm9sbFBvc2l0aW9uKTtcclxuXHJcbiAgICAgICAgICAgICAgICBzZXRIdG1sKCQuY29sb3Jib3guc2VsZWN0ZWREYXRhKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBIVE1MIGZvciBhIHNpbmdsZSBpbWFnZS5cclxuICAgICAqL1xyXG4gICAgdmFyIHJlbmRlclNpbmdsZUltYWdlID0gZnVuY3Rpb24gKGltYWdlKSB7XHJcbiAgICAgICAgcmV0dXJuICc8c2VjdGlvbiBjbGFzcz1cImhlcm9cIj5cXG5cXHQ8cGljdHVyZT5cXG5cXHRcXHQ8aW1nIHNyYz1cIicgKyBpbWFnZS5yZXNvdXJjZSArICdcIiBjbGFzcz1cImRpc3BsYXktLWJsb2NrXCIgYWx0PVwiJyArIGltYWdlLmFsdGVybmF0ZVRleHQgKyAnXCIgLz5cXG5cXHQ8L3BpY3R1cmU+XFxuPC9zZWN0aW9uPic7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogVXNlcyBzZWxlY3RlZCBtZWRpYSB0byBzZXQgSFRNTC5cclxuICAgICAqL1xyXG4gICAgdmFyIHNldEh0bWwgPSBmdW5jdGlvbiAobWVkaWEpIHtcclxuICAgICAgICBpZiAoIW1lZGlhIHx8IG1lZGlhLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgaHRtbCA9ICcnO1xyXG5cclxuICAgICAgICBpZiAobWVkaWEubGVuZ3RoID09PSAxICYmIG1lZGlhWzBdLmNvbnRlbnRUeXBlID09PSBDT05URU5UX1RZUEVfSU1BR0UpIHtcclxuICAgICAgICAgICAgaHRtbCA9IHJlbmRlclNpbmdsZUltYWdlKG1lZGlhWzBdKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICRpbnB1dC52YWwoaHRtbCk7XHJcbiAgICAgICAgJGlucHV0WzBdLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCdjaGFuZ2UnKSk7XHJcblxyXG4gICAgfTtcclxuXHJcbiAgICBhZGRMaXN0ZW5lcnMoKTtcclxufSkoKTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
